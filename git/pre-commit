require 'rubocop'

changed_files = `git status --porcelain`.split(/\n/).
    map { |file_name_with_status|
      file_name_with_status.split(' ')[1]
    }.
    select { |file_name|
      File.extname(file_name) == '.rb'
    }.join(' ')
system("rubocop #{changed_files} -c ~/.rubocop.yml") unless changed_files.empty?

exit $CHILD_STATUS.to_s[-1].to_i
